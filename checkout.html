<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Checkout | H&M</title>
    <link rel="stylesheet" href="./css_files/checkout.css" />
  </head>
  <body>
    <div class="checkout-container">
      <!-- Left Section: Customer Info Form -->
      <div class="checkout-form-section">
        <h1>Checkout</h1>
        <h2>My Information</h2>
        <form id="checkout-form">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" name="firstName" required />
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" name="lastName" required />
          </div>
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" required />
          </div>
          <div class="form-group">
            <label for="phone">Mobile Number</label>
            <input type="tel" id="phone" name="phone" required />
          </div>
          <div class="form-group">
            <label for="address">Street Address</label>
            <input type="text" id="address" name="address" required />
          </div>
          <div class="form-group">
            <label for="city">City</label>
            <input type="text" id="city" name="city" required />
          </div>
          <div class="form-group">
            <label for="zip">Zip/Postal Code</label>
            <input type="text" id="zip" name="zip" required />
          </div>
          <p>
            By placing this order, you agree to H&M's
            <a href="#">Terms and Conditions</a>.
          </p>
          <button type="submit" class="save-btn">Save & Continue</button>
        </form>
      </div>

      <!-- Right Section: Order Summary -->
      <div class="checkout-summary-section">
        <h2>Order Summary</h2>
        <div class="summary-box">
          <div class="summary-row">
            <span>Order Value:</span>
            <span id="order-value">Rs. 0</span>
          </div>
          <div class="summary-row">
            <span>Discount:</span>
            <span id="discount-amount">-Rs. 0</span>
          </div>
          <div class="summary-row">
            <span>Delivery:</span>
            <span id="delivery-fee">Rs. 0</span>
          </div>
          <hr />
          <div class="summary-row total-row">
            <span>Total:</span>
            <span id="total-amount">Rs. 0</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Update order summary from cart stored in localStorage
      function updateSummary() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let totalPrice = 0;
        cart.forEach(product => {
          totalPrice += product.price;
        });
        // For example, flat discount Rs.200 if there's an order, free delivery
        let discount = totalPrice > 0 ? 200 : 0;
        let deliveryFee = 0;
        let finalTotal = totalPrice - discount + deliveryFee;
        
        document.getElementById("order-value").textContent = `Rs. ${totalPrice}`;
        document.getElementById("discount-amount").textContent = `-Rs. ${discount}`;
        document.getElementById("delivery-fee").textContent = `Rs. ${deliveryFee}`;
        document.getElementById("total-amount").textContent = `Rs. ${finalTotal}`;
      }
      
      document.addEventListener("DOMContentLoaded", function(){
        updateSummary();
        // On form submit, you may optionally validate/save data then redirect to payment page
        document.getElementById("checkout-form").addEventListener("submit", function(e) {
          e.preventDefault();
          // (Optional) Save the user info here
          window.location.href = "payment.html";
        });
      });
    </script>
  </body>
</html>
